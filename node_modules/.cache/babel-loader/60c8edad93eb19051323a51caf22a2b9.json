{"ast":null,"code":"import _slicedToArray from\"/Users/skye/Desktop/Portfolio/chronovis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';/*\n  For saving and downloading JSON data onto computer.\n*/import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ImportDataForm(_ref){var setToggle=_ref.setToggle,updateSrc=_ref.updateSrc,setFileName=_ref.setFileName,setProj=_ref.setProj;var _useState=useState(),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSelected=_useState4[0],setIsSelected=_useState4[1];var handleChange=function handleChange(e){setSelectedFile(e.target.files[0]);setIsSelected(true);e.preventDefault();};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!selectedFile){alert(\"Please select a file!\");return;}var fileReader=new FileReader();fileReader.readAsText(selectedFile);fileReader.onload=function(){var newSrc=JSON.parse(fileReader.result);//add different cases for JSON and img\nsetFileName(selectedFile.name.replace(\".json\",\"\"));//chop off .json extension from name\n// console.log(newSrc);\nupdateSrc(newSrc,\"import\");// setSrc(newSrc);\n// setScales(newSrc.scales);\n// setActiveScale([Object.keys(newSrc.scales.x)[0],Object.keys(newSrc.scales.y)[0]]);\n// setActiveData(0);\n// setData(newSrc.instants[activeData]);\n// setZones(newSrc.zones);\n};fileReader.onerror=function(){console.log(fileReader.error);};setProj(true);setToggle(null);};var handleClose=function handleClose(e){setToggle(null);e.preventDefault();};return/*#__PURE__*/_jsxs(\"form\",{className:\"ui absolute center\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"button\",{className:\"right uiButton closeButton\",onClick:handleClose,children:\"x\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"data\",onChange:handleChange}),/*#__PURE__*/_jsx(\"br\",{}),isSelected?/*#__PURE__*/_jsxs(\"p\",{children:[\"File name: \",selectedFile.name,/*#__PURE__*/_jsx(\"br\",{}),\"File type: \",selectedFile.type,/*#__PURE__*/_jsx(\"br\",{}),\"Size: \",selectedFile.size/1000,\" KB\"]}):/*#__PURE__*/_jsx(\"p\",{children:\"Select a file to show details\"}),/*#__PURE__*/_jsx(\"input\",{className:\"uiButton\",type:\"submit\",value:\"Upload\"})]});}export default ImportDataForm;","map":{"version":3,"sources":["/Users/skye/Desktop/Portfolio/chronovis/src/components/ImportDataForm.js"],"names":["React","useState","ImportDataForm","setToggle","updateSrc","setFileName","setProj","selectedFile","setSelectedFile","isSelected","setIsSelected","handleChange","e","target","files","preventDefault","handleSubmit","alert","fileReader","FileReader","readAsText","onload","newSrc","JSON","parse","result","name","replace","onerror","console","log","error","handleClose","type","size"],"mappings":"8JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA;AACA;AACA,E,wFAEA,QAASC,CAAAA,cAAT,MAAsE,IAA7CC,CAAAA,SAA6C,MAA7CA,SAA6C,CAAlCC,SAAkC,MAAlCA,SAAkC,CAAvBC,WAAuB,MAAvBA,WAAuB,CAAVC,OAAU,MAAVA,OAAU,CACpE,cAAwCL,QAAQ,EAAhD,wCAAOM,YAAP,eAAqBC,eAArB,eACD,eAAoCP,QAAQ,CAAC,KAAD,CAA5C,yCAAOQ,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC3BJ,eAAe,CAACI,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAf,CACAJ,aAAa,CAAC,IAAD,CAAb,CACEE,CAAC,CAACG,cAAF,GACF,CAJD,CAMA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACJ,CAAD,CAAO,CACzBA,CAAC,CAACG,cAAF,GAEA,GAAI,CAACR,YAAL,CAAmB,CACjBU,KAAK,CAAC,uBAAD,CAAL,CACA,OACD,CACD,GAAIC,CAAAA,UAAU,CAAG,GAAIC,CAAAA,UAAJ,EAAjB,CACAD,UAAU,CAACE,UAAX,CAAsBb,YAAtB,EACAW,UAAU,CAACG,MAAX,CAAoB,UAAM,CACxB,GAAMC,CAAAA,MAAM,CAAGC,IAAI,CAACC,KAAL,CAAWN,UAAU,CAACO,MAAtB,CAAf,CACA;AACApB,WAAW,CAACE,YAAY,CAACmB,IAAb,CAAkBC,OAAlB,CAA0B,OAA1B,CAAmC,EAAnC,CAAD,CAAX,CAAqD;AACrD;AACAvB,SAAS,CAACkB,MAAD,CAAS,QAAT,CAAT,CACA;AACA;AACA;AACA;AACA;AACA;AACD,CAZD,CAaAJ,UAAU,CAACU,OAAX,CAAqB,UAAM,CACzBC,OAAO,CAACC,GAAR,CAAYZ,UAAU,CAACa,KAAvB,EACD,CAFD,CAGAzB,OAAO,CAAC,IAAD,CAAP,CACAH,SAAS,CAAC,IAAD,CAAT,CAEF,CA5BD,CA8BC,GAAM6B,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpB,CAAD,CAAO,CACzBT,SAAS,CAAC,IAAD,CAAT,CACAS,CAAC,CAACG,cAAF,GACD,CAHD,CAKA,mBACE,cACE,SAAS,CAAC,oBADZ,CAEE,QAAQ,CAAEC,YAFZ,wBAIE,eAAQ,SAAS,CAAC,4BAAlB,CAA+C,OAAO,CAAEgB,WAAxD,eAJF,cAIiF,aAJjF,cAKE,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,MAAxB,CAA+B,QAAQ,CAAErB,YAAzC,EALF,cAK2D,aAL3D,CAMAF,UAAU,cACV,mCACaF,YAAY,CAACmB,IAD1B,cAC+B,aAD/B,eAEanB,YAAY,CAAC0B,IAF1B,cAE+B,aAF/B,UAGQ1B,YAAY,CAAC2B,IAAb,CAAkB,IAH1B,SADU,cAOV,oDAbA,cAeD,cAAO,SAAS,CAAC,UAAjB,CAA4B,IAAI,CAAC,QAAjC,CAA0C,KAAK,CAAC,QAAhD,EAfC,GADF,CAmBD,CAED,cAAehC,CAAAA,cAAf","sourcesContent":["import React, { useState } from 'react';\n\n/*\n  For saving and downloading JSON data onto computer.\n*/\n\nfunction ImportDataForm({setToggle, updateSrc, setFileName, setProj}) {\n  const [selectedFile, setSelectedFile] = useState();\n\tconst [isSelected, setIsSelected] = useState(false);\n\n\tconst handleChange = (e) => {\n\t\tsetSelectedFile(e.target.files[0]);\n\t\tsetIsSelected(true);\n    e.preventDefault();\n\t};\n\n\tconst handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!selectedFile) {\n      alert(\"Please select a file!\");\n      return;\n    }\n    let fileReader = new FileReader();\n    fileReader.readAsText(selectedFile);\n    fileReader.onload = () => {\n      const newSrc = JSON.parse(fileReader.result);\n      //add different cases for JSON and img\n      setFileName(selectedFile.name.replace(\".json\", \"\")); //chop off .json extension from name\n      // console.log(newSrc);\n      updateSrc(newSrc, \"import\")\n      // setSrc(newSrc);\n      // setScales(newSrc.scales);\n      // setActiveScale([Object.keys(newSrc.scales.x)[0],Object.keys(newSrc.scales.y)[0]]);\n      // setActiveData(0);\n      // setData(newSrc.instants[activeData]);\n      // setZones(newSrc.zones);\n    }\n    fileReader.onerror = () => {\n      console.log(fileReader.error);\n    }\n    setProj(true);\n    setToggle(null);\n\n\t};\n\n  const handleClose = (e) => {\n    setToggle(null);\n    e.preventDefault();\n  }\n\n  return (\n    <form\n      className=\"ui absolute center\"\n      onSubmit={handleSubmit}\n    >\n      <button className=\"right uiButton closeButton\" onClick={handleClose}>x</button><br/>\n      <input type=\"file\" name=\"data\" onChange={handleChange} /><br/>\n\t\t\t{isSelected ? (\n\t\t\t\t<p>\n\t\t\t\t\tFile name: {selectedFile.name}<br/>\n\t\t\t\t\tFile type: {selectedFile.type}<br/>\n\t\t\t\t\tSize: {selectedFile.size/1000} KB\n\t\t\t\t</p>\n\t\t\t) : (\n\t\t\t\t<p>Select a file to show details</p>\n\t\t\t)}\n\t\t\t<input className=\"uiButton\" type=\"submit\" value=\"Upload\"/>\n    </form>\n  );\n}\n\nexport default ImportDataForm;\n"]},"metadata":{},"sourceType":"module"}