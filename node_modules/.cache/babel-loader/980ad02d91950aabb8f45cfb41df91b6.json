{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sumac\\\\Documents\\\\GitHub\\\\chronovis-paintbox\\\\src\\\\components\\\\NewInstantForm.js\";\nimport React from 'react';\nimport InputFormScale from './InputFormScale';\nimport InputFormText from './InputFormText';\nimport InputFormNum from './InputFormNum';\n/*\r\n   UI and function for adding new points.\r\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass NewInstantForm extends React.Component {\n  //controlled component, meaning React is the \"single source of truth\"\n  constructor(props) {\n    super(props);\n    this.state = {\n      label: '',\n      xValue: props.target ? props.target.x : '',\n      //\"target\" is scaled mouse click coordinates. Graphics.js addInstant\n      yValue: props.target ? props.target.y : '',\n      xScale: props.activeScale[0],\n      yScale: props.activeScale[1],\n      color: '',\n      opacity: '',\n      radius: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    console.log(e);\n    const value = e.target.value;\n    const name = e.target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleClose(e) {\n    this.props.setToggle(null);\n    e.preventDefault();\n  }\n\n  handleSubmit(e) {\n    //consider turning into useCallback\n    e.preventDefault();\n    const newData = { ...this.props.data\n    };\n    const lastKey = Object.keys(newData).pop() ? parseInt(Object.keys(newData).pop()) : -1;\n    const lastInstant = newData[lastKey]; //last instant of data\n\n    const tempx = parseFloat(this.state.xValue); //if y pos specified, convert to float. otherwise, return null\n\n    const tempy = this.state.yValue ? parseFloat(this.state.yValue) : null; //error handling. btw, isNan(null) === false\n\n    if (isNaN(tempx) && isNaN(tempy)) {\n      alert(\"Make sure Time and y Position are numbers!\");\n    } else if (isNaN(tempx)) {\n      alert(\"Make sure Time is a number!\");\n    } else if (isNaN(tempy)) {\n      alert(\"Make sure y Position is a number!\");\n    } else {\n      //generate instant\n      newData[`${lastKey + 1}`] = {\n        \"x\": tempx,\n        \"y\": this.state.yValue ? tempy : lastInstant ? lastInstant.y : 0,\n        // if y not specified, take value of last instant\n        \"scale\": [this.state.xScale, this.state.yScale],\n        \"target\": null,\n        \"text\": this.state.label,\n        ...(this.state.color && {\n          \"color\": this.state.color\n        }),\n        //if color is specified, create color entry in data\n        ...(this.state.radius && {\n          \"radius\": this.state.radius\n        }),\n        ...(this.state.opacity && {\n          \"opacity\": this.state.opacity\n        })\n      };\n    }\n\n    ; //order of parameters is important\n\n    this.props.updateSrc(newData);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"ui absolute center container\",\n      children: [/*#__PURE__*/_jsxDEV(InputFormText, {\n        label: \"Label\",\n        name: \"label\",\n        onChange: this.handleChange,\n        value: this.state.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormScale, {\n        scales: this.props.scales.x,\n        label: \"X Scale\",\n        name: \"xScale\",\n        value: this.state.xScale,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormNum, {\n        label: \"Time\",\n        name: \"xValue\",\n        placeholder: \"numbers only for now\",\n        value: this.state.xValue,\n        onChange: this.handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormScale, {\n        scales: this.props.scales.y,\n        label: \"Y Scale\",\n        name: \"yScale\",\n        value: this.state.yScale,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormNum, {\n        label: \"Y Value\",\n        name: \"yValue\",\n        placeholder: \"numbers only for now\",\n        value: this.state.yValue,\n        onChange: this.handleChange,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormText, {\n        label: \"Color\",\n        name: \"color\",\n        placeholder: \"blue, #4DA6FF, etc.\",\n        value: this.state.color,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormNum, {\n        label: \"Certainty\",\n        name: \"opacity\",\n        placeholder: \"0 to 1 (default 1)\",\n        value: this.state.opacity,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputFormNum, {\n        label: \"Radius\",\n        name: \"radius\",\n        placeholder: \"(default 5)\",\n        value: this.state.radius,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flexCenter\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonSecondary\",\n          onClick: this.handleClose,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), \" \\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttonSecondary\",\n          onClick: this.handleSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default NewInstantForm;","map":{"version":3,"names":["React","InputFormScale","InputFormText","InputFormNum","NewInstantForm","Component","constructor","props","state","label","xValue","target","x","yValue","y","xScale","activeScale","yScale","color","opacity","radius","handleChange","bind","handleClose","handleSubmit","e","console","log","value","name","setState","setToggle","preventDefault","newData","data","lastKey","Object","keys","pop","parseInt","lastInstant","tempx","parseFloat","tempy","isNaN","alert","updateSrc","render","scales"],"sources":["C:/Users/Sumac/Documents/GitHub/chronovis-paintbox/src/components/NewInstantForm.js"],"sourcesContent":["import React from 'react';\r\nimport InputFormScale from './InputFormScale';\r\nimport InputFormText from './InputFormText';\r\nimport InputFormNum from './InputFormNum';\r\n\r\n/*\r\n   UI and function for adding new points.\r\n*/\r\n\r\nclass NewInstantForm extends React.Component {\r\n  //controlled component, meaning React is the \"single source of truth\"\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      label: '',\r\n      xValue: props.target?props.target.x:'', //\"target\" is scaled mouse click coordinates. Graphics.js addInstant\r\n      yValue: props.target?props.target.y:'',\r\n      xScale: props.activeScale[0],\r\n      yScale: props.activeScale[1],\r\n      color: '',\r\n      opacity: '',\r\n      radius: ''\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    console.log(e)\r\n    const value = e.target.value;\r\n    const name = e.target.name;\r\n    this.setState({\r\n      [name]: value\r\n    });\r\n  }\r\n\r\n  handleClose(e) {\r\n    this.props.setToggle(null);\r\n    e.preventDefault();\r\n  }\r\n\r\n  handleSubmit(e) { //consider turning into useCallback\r\n    e.preventDefault();\r\n    const newData = {...this.props.data};\r\n    const lastKey = Object.keys(newData).pop() ? parseInt(Object.keys(newData).pop()) : -1;\r\n    const lastInstant = newData[lastKey]; //last instant of data\r\n\r\n    const tempx = parseFloat(this.state.xValue);\r\n    //if y pos specified, convert to float. otherwise, return null\r\n    const tempy = this.state.yValue ? parseFloat(this.state.yValue) : null;\r\n\r\n    //error handling. btw, isNan(null) === false\r\n    if (isNaN(tempx) && isNaN(tempy)) {\r\n      alert(\"Make sure Time and y Position are numbers!\");\r\n    } else if (isNaN(tempx)) {\r\n      alert(\"Make sure Time is a number!\");\r\n    } else if (isNaN(tempy)) {\r\n      alert(\"Make sure y Position is a number!\");\r\n    } else {\r\n      //generate instant\r\n      newData[`${lastKey+1}`] = {\r\n        \"x\":tempx,\r\n        \"y\": this.state.yValue ? tempy : ( lastInstant ? lastInstant.y : 0 ), // if y not specified, take value of last instant\r\n        \"scale\": [this.state.xScale,this.state.yScale],\r\n        \"target\": null,\r\n        \"text\": this.state.label,\r\n        ...(this.state.color && {\"color\": this.state.color}), //if color is specified, create color entry in data\r\n        ...(this.state.radius && {\"radius\": this.state.radius}),\r\n        ...(this.state.opacity && {\"opacity\": this.state.opacity})\r\n      };\r\n    };\r\n\r\n    //order of parameters is important\r\n    this.props.updateSrc(newData);\r\n\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <form className=\"ui absolute center container\">\r\n        <InputFormText\r\n          label=\"Label\"\r\n          name=\"label\"\r\n          onChange={this.handleChange}\r\n          value={this.state.label}\r\n        />\r\n        <InputFormScale\r\n          scales={this.props.scales.x}\r\n          label=\"X Scale\"\r\n          name=\"xScale\"\r\n          value={this.state.xScale}\r\n          onChange={this.handleChange}\r\n        />\r\n        <InputFormNum\r\n          label=\"Time\"\r\n          name=\"xValue\"\r\n          placeholder=\"numbers only for now\"\r\n          value={this.state.xValue}\r\n          onChange={this.handleChange}\r\n          required\r\n        />\r\n        <InputFormScale\r\n          scales={this.props.scales.y}\r\n          label=\"Y Scale\"\r\n          name=\"yScale\"\r\n          value={this.state.yScale}\r\n          onChange={this.handleChange}\r\n        />\r\n        <InputFormNum\r\n          label=\"Y Value\"\r\n          name=\"yValue\"\r\n          placeholder=\"numbers only for now\"\r\n          value={this.state.yValue}\r\n          onChange={this.handleChange}\r\n          required\r\n        />\r\n        <InputFormText\r\n          label=\"Color\"\r\n          name=\"color\"\r\n          placeholder=\"blue, #4DA6FF, etc.\"\r\n          value={this.state.color}\r\n          onChange={this.handleChange}\r\n        />\r\n        <InputFormNum\r\n          label=\"Certainty\"\r\n          name=\"opacity\"\r\n          placeholder=\"0 to 1 (default 1)\"\r\n          value={this.state.opacity}\r\n          onChange={this.handleChange}\r\n        />\r\n        <InputFormNum\r\n          label=\"Radius\"\r\n          name=\"radius\"\r\n          placeholder=\"(default 5)\"\r\n          value={this.state.radius}\r\n          onChange={this.handleChange}\r\n        />\r\n        <br/>\r\n        <div className=\"flexCenter\">\r\n          <button className=\"buttonSecondary\" onClick={this.handleClose}>Cancel</button> &nbsp;\r\n          <button className=\"buttonSecondary\" onClick={this.handleSubmit}>Submit</button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n};\r\n\r\nexport default NewInstantForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}